<style>
  #gameCard{
      max-width: 33%;
  }
  @media screen and (max-width: 1500px){
      #gameCard{
          max-width: 33%;
      }
  }
  @media screen and (max-width: 900px){
      #gameCard{
          max-width: 100%;
      }
  }

  @media screen and (max-width: 576px){
      .gameImage{
          width: 100%;
      }
      
      #gameCard{ 
          max-width: 100%;
      }
  }
  
</style>

<%- include('./templates/header.ejs', { "name": name }) %>

<body>
  <main>
      <h1>
          Search for Games
      </h1>
  
      <br>
  
      <div id="filter">
        <h3>Filter by Categories:</h3>
        <div id="gameGenreTypes" class="row">
          <% let selectedGenreTypes = [] %>
          <% apiGenres.forEach((type) => { %>
            <% const isChecked = selectedGenreTypes.includes(type.slug); %>
            <div class=" col-md-5 col-lg-3">
              <div class="form-check">
                <input class="form-check-input typeCheckbox" type="checkbox" value="<%=type.slug%>" <%= isChecked ? 'checked' : '' %>>
                <label class="form-check-label"><%=type.name%></label>
              </div>
            </div>
          <% }) %>
        </div>
      </div>
      <br>
  
      <ul class="pagination">
        <!-- Previous Page button -->
        <a class="btn btn-primary ml-1" href="/searchGames?page=<%= (currentPage - 1) %>" <% if (currentPage === 1) { %> style="display: none;" <% } %> >
          <
        </a> &nbsp;
  
          <% for (let i = 1; i <= numPages; i++) { %>
            <li>
              <% if (currentPage === i) { %>
                <a class="btn btn-primary active" href="/searchGames?page=<%= i %>"
                  <% } else { %>
                    <a class="btn btn-primary" href="/searchGames?page=<%= i %>"
                <% } %>
              ><%= i %></a>
            </li>
            &nbsp;
          <% } %>
          <!-- Next Page button -->
          <a class="btn btn-primary ml-1" href="/searchGames?page=<%= currentPage + 1 %>" <% if (currentPage === numPages) { %> style="display: none;" <% } %> >
            >
          </a>
        </ul>
  
        <div class="row">
          <% for (let i = 0; i < databaseGames.length; i++) { %>
                  <div class="card" id = gameCard>
                      <div class="row g-0">
                          <div class="col-sm row-">
                              <img src="
                                  <%= databaseGames[i].cover %>
                                  " class="img-fluid rounded-start gameImage" alt="Tears of the Kingdom">
                          </div>
                          <div class="col-sm row-">
                               <div class="card-body">
                                  <h5 class="card-title"><%= databaseGames[i].title %></h5>
                                  <p class="card-text"><%= databaseGames[i].summary %></p>
                                  <p class="card-text"><%= databaseGames[i]._id %></p>
                                  <form method="post" action="/gameInformation">
                                      <input type="hidden" name="mongoGameID" value="<%= databaseGames[(i)]._id %>">
                                      <input type="hidden" name="apiGameID" value="<%= databaseGames[(i)].apiID %>">
                                      <input type ="hidden" name="gameImage" value="<%= databaseGames[(i)].cover %>">
                                      <button type="submit" class="btn btn-primary">See more information</button>
                                  </form>
                              </div>
                          </div>
                      </div>
                  </div>
                  <% } %>
              </div>
      </main>
      <%- include('./templates/footer.ejs') %>
      <% console.log('load script') %>
</body>